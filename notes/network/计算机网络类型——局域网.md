# 局域网

**局域网**（Local Area Network，LAN）是指在一个较小的地理范围（如一所学校）内，将各种计算机、外部设备和数据库系统等通过双绞线、同轴电缆等连接介质互相连接起来，组成资源和信息共享的计算机互联网络。主要特点如下：

1. 为一个单位所拥有，且地址范围和站点数目均有限。
2. 所有站点共享较高的总带宽（即较高的数据传输率）。
3. 较低的时延和较低的误码率。
4. 各站为平等关系而非主从关系。
5. 能进行广播和多播。

局域网的特性主要由三个要素决定：拓扑结果、传输介质、介质访问控制方式，其中最重要的是介质访问控制方式，它决定着局域网的技术特性。

常见的局域网拓扑结构主要有以下 4 大类：

1. 星形结构。
2. 环形结构。
3. 总线形结构。
4. 星形和总线形结合的复合型结构。

局域网可以使用双绞线、铜缆和光纤等多种传输介质，其中双绞线为主流传输介质。

局域网的介质访问控制方法主要有 CSMA/CD、令牌总线和令牌环，其中前两种方法主要用于总线形局域网，令牌环主要用于环形局域网。

三种特殊的局域网拓扑实现如下：

- 以太网（目前使用范围最广的局域网）。逻辑拓扑是总线形结构，物理拓扑是星形或拓展星形结构。
- 令牌环（Token Ring，IEEE 802.5）。逻辑拓扑是环形结构，物理拓扑是星形结构。
- FDDI（光纤分布数字接口，IEEE 802.5）。逻辑拓扑是环形结构，物理拓扑是双环结构。

IEEE 802 标准定义的局域网参考模型只对应于 OSI 参考模型的数据链路层和物理层，并将数据链路层拆分为两个子层：**逻辑链路控制**（LLC）子层和 **媒体接入控制**（MAC）子层。与接入传输媒体有关的内容都放在 MAC 子层，它向上层屏蔽对物理层访问的各种差异，提供对物理层的统一访问接口，主要功能包括：组帧和拆卸帧、比特传输差错检测、透明传输，LLC 子层与传输媒体无关，它向网络层提供无确认无连接、面向连接、带确认无连接、告诉传送 4 种不同的连接服务类型。

由于以太网在局域网市场中取得垄断地位，几乎成为局域网的代名词，而 802 委员会指定的 LLC 子层作用已经不大，故现在许多网卡仅装有 MAC 协议而没有 LLC 协议。IEEE 802 协议层与 OSI 模型的比较如下图所示。

images（王道 图 3.23 IEEE 802 协议层与 OSI 模型的比较）

## MAC 地址

每块网络适配器都有一个地址，在链路层中有各种不同的称呼： **MAC 地址**、 **LAN 地址**（LAN address）或**物理地址**（physical address）。对于大多数局域网而言，MAC 地址长 6 字节，共有 $2^{48}$ 个可能的 MAC 地址。通常用连字符或冒号分隔的 6 个 16 进制数表示，如 `02-60-8c-e4-b1-21`。 高 24 位为厂商代码，低 24 位为厂商自行分配的网卡序列号。如下图所示。

images（自顶向下方法 图 5-16 与局域网相连的每个接口都有一个唯一的MAC地址）

由于总线上使用的是广播通信，因此网卡从网络上每收到一个 MAC 帧，首先要用硬件检查 MAC 帧中的 MAC 地址。如果是发生本站的帧，那么就收下，否则丢弃。

由 IEEE 在管理着 MAC 地址空间，从而实现适配器具有唯一的 MAC 地址。当一个公司要生产适配器时，它支付象征性的费用购买组成 $2^{24}$ 个地址的一块地址空间。IEEE 分配这块 $2^{24}$ 个地址的方式是：固定一个 MAC 地址的前 24 比特，让公司自己为每个适配器生成后 24 比特的唯一组合。

适配器的 MAC 地址具有扁平结构（这与层次结构相反），而且不论适配器到哪里用都不会变化。带有以太网接口的便携机总具有同样的 MAC 地址，无论该计算机位于何方。具有 802.11 接口的一台智能手机总是具有相同的 MAC 地址，无论该智能手机到哪里。与之形成对照的是，前面说过的 IP 地址需要改变，即改变它所连接到的网络。适配器的 MAC 地址与人的社会保险号相似，后者也具有扁平寻址结构，而且无论人到哪里该号码都不会变化。IP 地址则与一个人的邮政地址相似，它是有层次的，无论何时当人搬家时，该地址都必须改变。就像一个人可能发现邮政地址和社会保险号都有用那样，一台主机具有一个网络层地址和一个 MAC 地址是有用的。

当某适配器要向某些目的地适配器发送一个帧时，发送适配器将目的适配器的 MAC 地址插入到该帧中，并将该帧发送到局域网上。如我们马上要看到的那样，一台交换机偶尔将一个入帧广播到它的所有接口。我们将在第 6 章中看到 802.11 也广播帧。因此一块适配器可以接收一个一个并非向它寻址的帧。这样，当适配器接收到一个帧时，将检查该帧中的目的 MAC 地址是否与它自己的 MAC 地址匹配。如果匹配，该适配器提取出封装的数据报，并将该数据报沿协议栈向上传递。如果不匹配，该适配器丢弃该帧，而不会向上传递该网络层数据报。所以，仅当收到该帧时，才会中断目的地。

然而，有时某发送适配器的确要让局域网上所有其他适配器来接收并处理它打算发送的帧。在这种情况下，发送适配器在该帧的目的地址字段中插入一个特殊的 MAC 广播地址（broadcast address）。对于使用 6 字节地址的局域网（例如以太网和 802.11）来说，广播地址是 48 个连续的 1 组成的字符串（即以十六进制表示法的 FF-FF-FF-FF-FF-FF）。

### 帧结构

以太网帧如下图所示。通过仔细研究以太网的帧，我们能够学到许多有关以太网的知识。

images（自顶向下方法 图 5-20 以太网帧结构）

为了将对以太网帧的讨论放到切实的环境中，考虑从一台主机向另一台主机发送一个 IP 数据报，且这两台主机在相同的一台局域网上。设发送适配器的 MAC 地址是 AA-AA-AA-AA-AA-AA，接收适配器的 MAC 地址是 BB-BB-BB-BB-BB-BB。发送适配器在一个以太网帧中封装了一个 IP 数据报，并把该帧传递到物理层。接收适配器从物理层收到这个帧，提取出 IP 数据报，并将该 IP 数据报传递给网络层。我们现在在这种情况下考虑如上图所示的以太网帧的 6 个字段：

- **数据字段**    46~1500 字节，这个字段承载了 IP 数据报。以太网的最大传输单元（MTU）是 1500 字节。这意味着如果 IP 数据报超过了 1500 字节，则主机必须将该数据报分片。数据字段的最小长度是 46 字节。这意味着如果 IP 数据报小于 46 字节，数据报必须被填充到 46 字节。当采用填充时，传递到网络层的数据包括 IP 数据报和填充部分。网络层使用 IP 数据报首部中的长度字段来去除填充部分。
- **目的地址**    6 字节，这个字段包含目的适配器的 MAC 地址，即BB-BB-BB-BB-BB-BB。当适配器 B 收到一个以太网帧，帧的目的地址无论是 BB-BB-BB-BB-BB-BB，还是 MAC 广播地址，它都将该帧的数据字段的内容传递给网络层；如果它收到了具有任何其他 MAC 地址的帧，则丢弃之。
- **源地址**    6 字节，这个字段包含了传输该帧到局域网上的适配器的 MAC 地址，在本例中为 AA-AA-AA-AA-AA-AA。
- **类型字段**    2 字节，类型字段允许以太网复用多种网络层协议。为了理解这点，我们需要记住主机能够使用除了 IP 一台的其他网络层协议。事实上，一台给定的主机可以支持网络层协议，以对不能的应用采用不同的协议。因此，当以太网到达适配器 B，适配器 B 需要知道它应该将数据字段的内容传递给哪个网络层协议。IP 和其他链路层协议都有它们各自的、标准化的类型编号。此外，ARP 协议由自己的类型编号，并且如果到达的帧包含 ARP 协议，则该 ARP 分组将被多路分解给 ARP 协议。注意到该类型字段和网络层数据报中的协议字段，运输层报文段的端口号字段相类似；所有这些字段都是为了把一层中的某些以与上一层的某协议结合起来。
- **循环冗余检测**（CRC），4字节，目的是使得接收适配器（适配器B）检测帧中是否引入了差错。
- **前同步码**，8 字节，以太网帧以一个 8 字节的前同步码（Preamble）字段开始。该前同步码的前 7 字节的值都是 10101010；最后一个字节是 10101011。前同步码字段的前 7 字节用于 “唤醒” 接收适配器，并且将它们的时钟和发送方的时钟同步。为什么这些时钟会不同步呢？记住适配器 A 的目的是根据以太局域网类型的不同，分别以 10Mbps、100Mbps 或者 1Gbps 的速率传输帧。然而，没有什么是完美无缺的，因此适配器 A 不会以精确的额定速率传输帧；相对于额定速率总有一些漂移，局域网上的其他适配器不会预先知道这种漂移的。接收适配器只需通过锁定前同步码的前 7 字节的比特，就能够锁定适配器 A 的时钟。前同步码的第 8 个字节的最后两个比特（第一个出现的两个连续的 1）警告适配器 B，“重要的内容” 就要到来了。

所有的以太网技术都向网络层提供无连接服务。这就是说，当适配器 A 要向适配器 B 发送一个数据报时，适配器 A 在一个以太网中封装该数据报，并且把该帧发送到局域网上，没有先与适配器 B 握手。这种第二层的无连接服务类似于 IP 的第三层数据报服务和 UDP 的第 4 层无连接服务。

以太网技术都向网络层提供不可靠服务（unreliable service）。特别是，当适配器 B 收到一个来自适配器 A 的帧，它对该帧执行 CRC 校验时它也不发送否定确认帧。当某帧没有通过 CRC 校验，适配器 B 只是丢弃该帧。因此，适配器 A 根本不知道它传输的帧是否达到了 B 并通过了 CRC 校验。（在链路层）缺乏可靠的传输有助于使得以太网简单和便宜。但是它也意味着传递到网络层的数据报流能够有间隙。

如果由于丢弃了以太网帧而存在间隙，主机 B 上的应用也会看见这个间隙吗？如我们在第 3 章中学习的那样，这只取决于该应用是使用 UDP 还是使用 TCP。如果应用使用的是 UDP，则主机 B 中的应用的确会看到数据中的间隙。另一方面，如果应用使用的是 TCP，则主机 B 中的 TCP 将不会确认包含在丢弃帧中的数据，从而引起主机 A 的 TCP 重传。注意到当 TCP 重传数据时，数据最终将回到曾经丢弃它的以太网适配器。因此，从这种意义上来说，以太网的确重传了数据，尽管以太网并不知道它是正在传输一个具有全新数据的全新数据报，还是一个包含已经被传输过至少一次的数据的数据报。

--缓存--

以太网 MAC 帧格式有两种标准：DIX Ethernet V2 标准和 IEEE 802.3 标准。DIX Ethernet V2 标准的 MAC 帧格式如下图所示。

images（王道 图 3.24 DIX Ethernet V2 标准的 MAC 帧格式）

前导码：使接收端与发送端时钟同步。在帧前面插入的 8 字节可再分为两个字段：第一个字段共 7 字节，是前同步码，用来快速实现 MAC 帧的比特同步；第二个字段是帧开始定界符，表示后面的信息就是 MAC 帧。

注意：MAC 帧并不需要帧结束符，因为以太网在传递帧时，各帧之间必须要有一定的空隙。因此，接收端只要找到帧开始定界符，其后面连续到达的比特流就都属于同一个 MAC 帧，所以上图只有帧开始定界符。但不要误认为以太网 MAC 帧不需要尾部，在数据链路层上，帧既要加首部，也要加尾部。

地址：通常使用 6 字节（48bit）地址（MAC 地址）。

类型：2 字节，指出数据域中携带的数据应交给哪个协议实体处理。

数据：46~1500 字节，包含高岑给的协议消息。由于 CSMA/CD 算法的限制，以太网帧必须满足最小长度要求 64 字节，数据较少时必须加以填充（0~46 字节）。

注意：46 和 1500 是怎么来的？首先，由 CSMA/CD 算法可知以太网帧额最短帧长为 64B，而 MAC 帧的首部和尾部的长度为 18 字节，所以数据最短为 64-18=46 字节。其次，最大的 1500 字节是规定的，没有为什么。

填充：0~46 字节，当帧长太短时填充帧，使之达到 64 字节的最小长度。

校验码（FCS）：4 字节，校验范围从目的地址段到数据段的末尾，算法采用 32 位循环冗余码（CRC），不但需要检验 MAC 帧的数据部分，还要检验目的地址、源地址和类型字段，但不校验前导码。

802.3 帧格式与 DIX 以太帧格式的不同之处如下：

1. 帧起始标志：与 802.4 和 802.5 兼容。
2. 长度域：替代了 DIX 帧中的类型域，指出数据域的长度。

在实践中，前述长度/类型两种机制可以并存，由于 IEEE 802.3 数据段的最长字节数是 1500，所以长度段的最大值是 1500，因此从 1501 到 65535 的值可用于类型段标识符。

--缓存--



## 以太网

**以太网**（Ethernet） 是一种计算机局域网技术。IEEE 组织的 IEEE 802.3 标准制定了以太网的技术标准，它规定了包括物理层的连线、电子信号和介质访问控制的内容。

因为以太网是第一个广泛部署的高速局域网，其他局域网标准如令牌环、FDDI 和 ARCNET 比以太网更加复杂、昂贵，而且局域网也会奋起直追，这使得以太网是目前最普遍的局域网技术。

IEEE 802.3 标准是一种基带总线形的局域网标准，它描述物理层和数据链路层的 MAC 子层的实现方法。随着技术的发展，该标准又有了大量的补充与更新，以支持更多的传输介质和更高的传输率。

以太网逻辑上采用总线形拓扑结构，以太网中的所有计算机共享同一条总线，信息以广播方式发送。为了保证数据通信的方便性和可靠性，以太网简化了通信流程并使用了 CSMA/CD 方式对总线进行访问控制。

早期符合 DIX Ethernet V2 标准的局域网被称为以太网，而 DIX Ethernet V2 标准与 IEEE 802.3 标准只有很小的差别，因此通常将 IEEE 802.3 局域网简称为以太网。

以太网采用两项措施简化通信：采用无连接的工作方式：不对发送的数据帧编号，也不要求接收方发送确认，即以太网尽最大努力交付数据，提供的是最不可靠服务，对于差错的纠正则由高层完成。

### 传输介质与网卡

以太网常用的传输介质有 4 种：粗缆、细缆、双绞线和光纤。各种传输介质的适用情况见下表。

|参数|10BASE5|10BASE2|10BASE-T|10BASE-FL|
|:---:|:---:|:---:|:---:|:---:|
|传输媒体|基带同轴电缆（粗缆）|基带同轴电缆（细缆）|非屏蔽双绞线|光纤对（850nm）|
|编码|曼彻斯特编码|曼彻斯特编码|曼彻斯特编码|曼彻斯特编码|
|拓扑结构|总线形|总线形|星形|点对点|
|最大段长|500m|185m|100m|2000m|
|最多结点数目|100|30|2|2|

注意：10BASE-T 非屏蔽双绞线以太网拓扑结构为星形网，星形网中心为集线器，但使用集线器的以太网在逻辑上仍然是一个总线网，属于一个冲突域。上表的内容是常识，例如题目中出现 10BASE5 时，是不会显式地告诉你它的传输媒体、编码方式、拓扑结构等信息。

计算机与外界局域网的连接是通过主机箱内插入的一块网络接口板[又称网络适配器（Adapter）或网络接口卡（Network Interface Card， NIC）] 实现的。网卡上装有处理器和存储器，是工作在数据链路层的网路组件。网卡是局域网中连接计算机和传输介质的接口，不仅能实现与局域网传输介质之间的物理连接和电信号匹配，还涉及帧的发送与接收、帧的封装与拆封、介质访问控制、数据的编码与解码及数据缓存功能等。

全世界的每块网卡在出厂时都有一个唯一的代码，称为介质访问控制（MAC）地址，这个地址用于控制主机在网络上的数据通信。数据链路层设备（网桥、交换机等）都使用各个网卡的 MAC 地址。另外，网卡控制着主机对介质的访问，因此网卡也工作在物理层，因为它只关注比特，而不关注任何地址信息和高层协议信息。

### 以太网分类

各类以太网会在速率和配线上存在差别。如下表展示部分以太网，许多以太网技术都已经被 IEEE 802.3 CSMA/CD 工作组标准化了。

| 常用名称       | 速率    | 非正式的IEEE标准名称 | 正式的IEEE标准名称 | 线缆类型 | 最大传输距离 |
| -------------- | ------- | -------------------- | ------------------ | -------- | ------------ |
| 以太网         | 10Mbps  | 10BASE-T             | 802.3              | 双绞线   | 100m         |
| 快速以太网     | 100Mbps | 100BASE-T            | 802.3u             | 双绞线   | 100m         |
| 吉比特以太网   | 1Gbps   | 1000BASE-LX          | 802.3z             | 光纤     | 5000m        |
| 吉比特以太网   | 1Gbps   | 1000BASE-T           | 802.3ab            | 双绞线   | 100m         |
| 10吉比特以太网 | 10Gbps  | 10GBASE-T            | 802.3an            | 双绞线   | 100m         |

非正式名称中，10、100、1000 或 10G 指以太网的速率；“BASE” 指基带以太网，意味着该物理媒体仅承载以太网流量，几乎所有的 802.3 标准都适用于基带以太网；最后一部分指物理媒体本身；以太网是链路层也是物理层的规范，并且能够经各种物理媒体承载，如同轴电缆、铜线和光纤。一般而言，“T” 指双绞铜线；“LX” 指光纤。

在这里，速率达到或超过 100Mb/s 的以太网称为高速以太网。

#### 快速以太网

100BASE-T 以太网是在双绞线上传送 100Mb/s 基带信号的星形拓扑结构以太网，它使用 CSMA/CD 协议。这种以太网既支持全双工方式，又支持半双工方式，可在全双工方式下工作而无冲突发生。因此，在全双工方式下不使用 CSMA/CD 协议。

MAC 帧格式仍然是 802.3 标准规定的。保持最短帧长不变，但将一个网段的最大电缆长度减小到 100m。帧间时间间隔从原来的 $9.6\mu s$ 改为现在的 $0.96\mu s$。

#### 吉比特以太网

吉比特以太网又称千兆以太网，允许在 1Gb/s 下用全双工和半双工两种工作方式。使用 802.3 协议规定的帧格式。在半双工方式下使用 CSMA/CD 协议（全双工方式不需要使用 CSMA/CD 协议）。与 10BASE-T 和 100BASE-T 技术向后兼容。

--缓存--

吉比特以太网是对极为成功的 10Mbps 和 100Mbps 以太网标准的扩展。吉比特以太网提供 1000Mbps 的总数据速率，与大量已经安装的以太网设备基础保持完全兼容。吉比特以太网的标准称为 IEEE 802.3z，它完成以下工作：

- 使用标准以太网帧格式（参见 自顶向下方法 图 5-20），并且向后兼容 10BASE-T 与 100BASE-T 技术。这使得吉比特以太网和现已安装的以太网设备基础很容易集成。
- 允许点对点链路以及共享的广播信道。如前所述，点对点链路使用交换机，而广播信道使用集线器。在吉比特以太网术语中，集线器被称为 “带缓存的分配器”。
- 使用 CSMA/CD 来共享广播信道。为了得到可接受的效率，结点之间的最大距离必须严格限制。
- 对于点对点信道，允许在两个方向上都以 1000Mbps 全双工操作。

吉比特以太网最初工作于光纤之上，现在能够工作在 5 类 UDP 线缆上。10 Gbps 以太网（10GBASE-T）于 2007 年已被标准化了，可提供更高的以太局域网能力。

--缓存--

#### 10 吉比特以太网

10 吉比特以太网与 10Mb/s、100Mb/s 和 1Gb/s 以太网的帧格式完全相同。10  吉比特以太网还保留了 802.3 标准规定的以太网最小和最大帧长，便于升级。10 吉比特以太网不再使用铜线而只使用光纤作为传输媒体。10 吉比特以太网只工作在全双工方式，因此没有争用问题，也不使用 CSMA/CD 协议。

以太网从 10Mb/s 到 10Gb/s 的演进证明了以太网是可扩展的（从 10Mb/s 到 10Gb/s）、灵活的（多种传输媒体、全/半双工、共享/交换），易于安装，稳健性好。

## 虚拟局域网

--缓存--

网络通信过程中经常会遇到网络负载过高，通信性能下降的情况，往往遇到这种情况，就需要分散网络负载，交换部署网络设备的位置等。在虚拟局域网出现之前，往往需要管理员手动更网络的拓扑结构，比如变更主机网段，进行硬件线路改造等，但是使用了虚拟局域网，就可以不用再做如此复杂的操作了，只需要修改网络结构即可。

images（程序员cxuan）

如上图所示，交换机按照端口区分了多个网段，从而区分了广播数据的传播范围，提高网络安全性。然而异构的两个网段之间，需要利用具有路由功能的交换机才能实现通信。

由于交换机端口有两种 VLAN 属性，一个是 VLANID，一个是 VLANTAG，分别对应 VLAN 对数据包设置 VLAN 标签和允许通过的 VLANTAG（标签）数据包，不同 VLANID 端口，可以通过相互允许 VLANTAG，构建 VLAN。

--缓存--

**虚拟局域网**（Virtual Local Area Network，VLAN、V-LAN）是一种构建于局域网交换技术（LAN Switch）的网络管理的技术，通过控制交换机有效分派出入局域网的分组到正确的出入端口，达到对不同的实体局域网中的设备进行逻辑分群管理，并降低局域网内大量资料流通时，因无用分组过多导致壅塞的问题，以及提高局域网的信息安全保障。

采用虚拟局域网技术，可以不受物理位置限制，根据用户需求进行 VLAN 划分；可以在一个交换机上实现，也可以跨交换机实现；可以根据网络用户的位置、作用、部门或根据使用的应用程序、上层协议或者以太网连接端口硬件地址来进行划分。而 VLAN 之间相互通信必须通过网络层协议实现，不能直接相互通信。

下图为 4 个交换机组成的网络拓扑，连接到不同的交换机上的设备被分成了三个局域网，但每个局域网中的设备都有一些是属于不同的学院，因此使用 VLAN 跨交换机划分三个虚拟局域网，能够使每个学院的设备可以无障碍通信。

images（谢希仁 图 3-27 三个虚拟局域网）

## 令牌环网

--缓存--

令牌环上传输的小的数据（帧）叫为令牌，谁有令牌谁就有传输权限。如果环上的某个工作站收到令牌并且有信息发送，它就改变令牌中的一位（该操作将令牌变成一个帧开始序列），添加想传输的信息，然后将整个信息发往环中的下一工作站。当这个信息帧在环上传输时，网络中没有令牌，这就意味着其它工作站想传输数据就必须等待。因此令牌环网络中不会发生传输冲突。

信息帧沿着环传输直到它到达目的地，目的地创建一个副本以便进一步处理。信息帧继续沿着环传输直到到达发送站时便可以被删除。发送站可以通过检验返回帧以查看帧是否被接收站收到并且复制。

与以太网 CSMA/CD 网络不同，令牌传递网络具有确定性，这意味着任意终端站能够传输之前可以计算出最大等待时间。该特征结合另一些可靠性特征，使得令牌环网络适用于需要能够预测延迟的应用程序以及需要可靠的网络操作的情况。

此外，光纤分布式数据接口（FDDI）中也运用了令牌传递协议。

--缓存--

**令牌环网**（Token Ring）是一种定义在 IEEE 802.5 中的 LAN 协议。基本原理是利用令牌来避免网络中的冲突，它与使用冲突检测算法 CSMA/CD 的以太网相比能提高网络的数据传送率。这里的令牌实际是一个特殊格式的 MAC 控制帧，本身并不包含信息，只是沿着环形总线在入网结点计算机间依次传递，并控制信道的使用，确认在同一时刻只有一个结点能够独占信道。站点只有取得令牌后才能发送数据帧，因此令牌环网不会发生碰撞。由于令牌在网环上是按顺序依次传递的，因此对所有入网计算机而言，访问权是公平的。此外，网络中还需专门结点维护令牌。如下图所示。

images（王道 图 3.27 令牌环网的基本原理）

令牌环网中令牌和数据的传递过程如下：

1. 网络空闲时，环路中只有令牌帧在循环传递。
2. 令牌传递到有数据要发送的站点处时，该站点就修改令牌中的一个标志位，并在令牌中附加自己需要传输的数据，将令牌编程一个数据帧，然后将这个数据帧发送出去。
3. 数据帧沿着环路传输，接收到的站点一边转发数据，一边查看帧的目的地址。如果目的地址和自己的地址相同，那么接收站就复制该数据帧以便进一步处理。
4. 数据帧沿着环路传输，直到到达该帧的源站点，源站点接收到自己发出去的数据帧后便不再进行转发。同时，发送方可以通过检验返回的数据帧来查看数据传输过程中是否有错，若有错则重传该帧。
5. 源站点传送完数据后，重新产生一个令牌，并将令牌传递给下一个站点，以交出对媒体的反问权限。

令牌环网在物理上采用星形拓扑结构，但逻辑上仍是环形拓扑结构，其标准由 IEEE 802.5 定义。上图中的环并不是由通信线路连接而成的物理环。