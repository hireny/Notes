# 前言

# INSERT语句优化

插入一个记录需要的时间由下列因素组成，其中的数字表示大约比例：

- 连接
- 发送查询给服务器
- 分许查询
- 插入记录
- 插入索引
- 关闭

这不考虑打开表的初始开销，每个并发运行的查询打开

表的大小以 logN(B树)的速度减慢索引的插入。

加快插入的一些方法：

如果同时从一个客户端插入很多行，使用含多个 `VALUE` 的 `INSERT` 语句同时插入几行。这比使用单行 `INSERT` 语句块（在某些情况下快几倍）。如果你正向一个非空表添加数据，可以调节 `bulk_insert_buffer_size` 变量，使数据插入更快。

如果你从不同的客户端插入很多行，能通过 `INSERT DELAYED` 语句加快所读。

用 MyISAM，如果在表中没有删除的行，能在 `SELECT` 语句正在运行的同时插入行。

当从一个文本文件装载一个表时，使用 `LOAD DATA INFILE`。这通常比使用很多 `INSERT` 语句快 20 倍。

当有很多索引时，有可能要多做些工作使得 `LOAD DATA INFILE` 更快写。

# UPDATE语句优化

更新查询的优化同 `SELECT` 查询一样，需要额外的写开销。写速度依赖于更新的数据大小和更新的索引的数量。没有更改的索引不被更新。

使更改更快的另一个方法是推迟更改然后在一行内进行多次更新。如果锁定表，同时做多个更新比一次做一个快的多。

# DELETE语句优化

删除一个记录的时间与索引数量确切成正比。为了更快速地删除记录，可以增加键告诉缓冲的大小。

如果想要删除一个表的所有行，使用 `TRUNCATE TABLE tb_name` 而不是用 `DELETE FROM tb_name`。